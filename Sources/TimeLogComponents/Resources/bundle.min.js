!function(){"use strict";const t={};function n(n,e){return t[n]||(t[n]=[]),t[n].push(e),()=>{t[n]=t[n].filter((t=>t!=e))}}function e(t,n,e){2==arguments.length&&"function"==typeof n&&(e=n,n=null),function(t,n){if(n){const e=r();t.callbackID=e,o[e]=n}window.webkit.messageHandlers.timeLineBridge.postMessage(JSON.stringify({...t,data:t.data?JSON.stringify(t.data):null}))}({eventName:t,data:n},e)}const o={};const r=function(){const t=()=>`${Date.now()}${Math.random().toString(36).substring(2)}`,n=new Set;return()=>{n.size>=500&&n.clear();let e=t();for(;n.has(e);)t=t();return n.add(e),e}}(),i={};function a(t,n){return i[t]=n,()=>{i[t]===n&&(i[t]=null)}}window.timeLineBridge={addEventListener:n,addEventHandler:a,callNative:e,triggerEvent:function(t,n){e(t,n)},_handleMessageFromNative:function(n){const e=JSON.parse(n);if(e.callbackID){const t=o[e.callbackID];t&&t(e.data)}else{const n=t[e.eventName];n&&n.length>0&&n.forEach((t=>{t(e.data)}))}},_handleEventFromNative:function(t){const{eventName:n,data:e}=JSON.parse(t)||{};if(n&&i[n]){const t=i[n](e||null);return null==t?null:JSON.stringify(t)}return null}};var l="object"==typeof global&&global&&global.Object===Object&&global,u="object"==typeof self&&self&&self.Object===Object&&self,c=l||u||Function("return this")(),f=c.Symbol,s=Object.prototype,d=s.hasOwnProperty,v=s.toString,p=f?f.toStringTag:void 0;var b=Object.prototype.toString;var g="[object Null]",m="[object Undefined]",h=f?f.toStringTag:void 0;function y(t){return null==t?void 0===t?m:g:h&&h in Object(t)?function(t){var n=d.call(t,p),e=t[p];try{t[p]=void 0;var o=!0}catch(t){}var r=v.call(t);return o&&(n?t[p]=e:delete t[p]),r}(t):function(t){return b.call(t)}(t)}var O="[object Symbol]";var w=/\s/;var T=/^\s+/;function N(t){return t?t.slice(0,function(t){for(var n=t.length;n--&&w.test(t.charAt(n)););return n}(t)+1).replace(T,""):t}function S(t){var n=typeof t;return null!=t&&("object"==n||"function"==n)}var j=NaN,B=/^[-+]0x[0-9a-f]+$/i,x=/^0b[01]+$/i,E=/^0o[0-7]+$/i,k=parseInt;function I(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return null!=t&&"object"==typeof t}(t)&&y(t)==O}(t))return j;if(S(t)){var n="function"==typeof t.valueOf?t.valueOf():t;t=S(n)?n+"":n}if("string"!=typeof t)return 0===t?t:+t;t=N(t);var e=x.test(t);return e||E.test(t)?k(t.slice(2),e?2:8):B.test(t)?j:+t}var C=function(){return c.Date.now()},J="Expected a function",L=Math.max,D=Math.min;function M(t,n,e){var o,r,i,a,l,u,c=0,f=!1,s=!1,d=!0;if("function"!=typeof t)throw new TypeError(J);function v(n){var e=o,i=r;return o=r=void 0,c=n,a=t.apply(i,e)}function p(t){var e=t-u;return void 0===u||e>=n||e<0||s&&t-c>=i}function b(){var t=C();if(p(t))return g(t);l=setTimeout(b,function(t){var e=n-(t-u);return s?D(e,i-(t-c)):e}(t))}function g(t){return l=void 0,d&&o?v(t):(o=r=void 0,a)}function m(){var t=C(),e=p(t);if(o=arguments,r=this,u=t,e){if(void 0===l)return function(t){return c=t,l=setTimeout(b,n),f?v(t):a}(u);if(s)return clearTimeout(l),l=setTimeout(b,n),v(u)}return void 0===l&&(l=setTimeout(b,n)),a}return n=I(n)||0,S(e)&&(f=!!e.leading,i=(s="maxWait"in e)?L(I(e.maxWait)||0,n):i,d="trailing"in e?!!e.trailing:d),m.cancel=function(){void 0!==l&&clearTimeout(l),c=0,o=u=r=l=void 0},m.flush=function(){return void 0===l?a:g(C())},m}const $={modules:{toolbar:!1},placeholder:"å¤‡æ³¨",theme:"snow",readOnly:{readOnly:!1,...window.tl_editor_config||{}}.readOnly},F=new Quill("#editor",$);function _(){const t=F.getSelection();return null==t?{}:F.getFormat(t)}function W(t){const n=_(),e=parseInt(n.indent||0,10);t*="rtl"===n.direction?-1:1,F.format("indent",e+t)}n("toolbar.boldButtonTapped",(()=>{const t=(n="bold",null!=_()[n]);var n;F.format("bold",!t)})),n("toolbar.numberListButtonTapped",(()=>{const t=_();F.format("list","ordered"!==t.list&&"ordered")})),n("toolbar.dashListButtonTapped",(()=>{const t=_();F.format("list","bullet"!==t.list&&"bullet")})),n("toolbar.checkBoxListButtonTapped",(()=>{const t=_();"checked"===t.list||"unchecked"===t.list?F.format("list",!1):F.format("list","unchecked")})),n("toolbar.increaseIndentButtonTapped",(()=>{W(1)})),n("toolbar.decreaseIndentButtonTapped",(()=>{W(-1)})),n("toolbar.blurButtonTapped",(()=>{F.blur()})),a("editor.fetchContent",(()=>F.getContents())),n("editor.setContent",(t=>{F.setContents(JSON.parse(t),"api")}));const H=function(t,n,e){var o=!0,r=!0;if("function"!=typeof t)throw new TypeError("Expected a function");return S(e)&&(o="leading"in e?!!e.leading:o,r="trailing"in e?!!e.trailing:r),M(t,n,{leading:o,maxWait:n,trailing:r})}((function(t){e("editor.contentChange",t)}),5e3,{leading:!1});F.on("text-change",((t,n,e)=>{"user"==e&&H(F.getContents())}))}();
