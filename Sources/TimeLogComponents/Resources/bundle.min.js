!function(){"use strict";const t={};function n(n,e){return t[n]||(t[n]=[]),t[n].push(e),()=>{t[n]=t[n].filter((t=>t!=e))}}function e(t,n,e){2==arguments.length&&"function"==typeof n&&(e=n,n=null),function(t,n){if(n){const e=r();t.callbackID=e,o[e]=n}window.webkit.messageHandlers.timeLineBridge.postMessage(JSON.stringify({...t,data:t.data?JSON.stringify(t.data):null}))}({eventName:t,data:n},e)}const o={};const r=function(){const t=()=>`${Date.now()}${Math.random().toString(36).substring(2)}`,n=new Set;return()=>{n.size>=500&&n.clear();let e=t();for(;n.has(e);)t=t();return n.add(e),e}}(),i={};function a(t,n){return i[t]=n,()=>{i[t]===n&&(i[t]=null)}}window.timeLineBridge={addEventListener:n,addEventHandler:a,callNative:e,triggerEvent:function(t,n){e(t,n)},_handleMessageFromNative:function(n){const e=JSON.parse(n);if(e.callbackID){const t=o[e.callbackID];t&&t(e.data)}else{const n=t[e.eventName];n&&n.length>0&&n.forEach((t=>{t(e.data)}))}},_handleEventFromNative:function(t){const{eventName:n,data:e}=JSON.parse(t)||{};if(n&&i[n]){const t=i[n](e||null);return null==t?null:JSON.stringify(t)}return null}};var l="object"==typeof global&&global&&global.Object===Object&&global,c="object"==typeof self&&self&&self.Object===Object&&self,u=l||c||Function("return this")(),s=u.Symbol,f=Object.prototype,d=f.hasOwnProperty,p=f.toString,v=s?s.toStringTag:void 0;var g=Object.prototype.toString;var b="[object Null]",m="[object Undefined]",h=s?s.toStringTag:void 0;function y(t){return null==t?void 0===t?m:b:h&&h in Object(t)?function(t){var n=d.call(t,v),e=t[v];try{t[v]=void 0;var o=!0}catch(t){}var r=p.call(t);return o&&(n?t[v]=e:delete t[v]),r}(t):function(t){return g.call(t)}(t)}var O="[object Symbol]";var w=/\s/;var T=/^\s+/;function N(t){return t?t.slice(0,function(t){for(var n=t.length;n--&&w.test(t.charAt(n)););return n}(t)+1).replace(T,""):t}function S(t){var n=typeof t;return null!=t&&("object"==n||"function"==n)}var j=NaN,B=/^[-+]0x[0-9a-f]+$/i,x=/^0b[01]+$/i,E=/^0o[0-7]+$/i,k=parseInt;function I(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return null!=t&&"object"==typeof t}(t)&&y(t)==O}(t))return j;if(S(t)){var n="function"==typeof t.valueOf?t.valueOf():t;t=S(n)?n+"":n}if("string"!=typeof t)return 0===t?t:+t;t=N(t);var e=x.test(t);return e||E.test(t)?k(t.slice(2),e?2:8):B.test(t)?j:+t}var J=function(){return u.Date.now()},L="Expected a function",C=Math.max,D=Math.min;function M(t,n,e){var o,r,i,a,l,c,u=0,s=!1,f=!1,d=!0;if("function"!=typeof t)throw new TypeError(L);function p(n){var e=o,i=r;return o=r=void 0,u=n,a=t.apply(i,e)}function v(t){var e=t-c;return void 0===c||e>=n||e<0||f&&t-u>=i}function g(){var t=J();if(v(t))return b(t);l=setTimeout(g,function(t){var e=n-(t-c);return f?D(e,i-(t-u)):e}(t))}function b(t){return l=void 0,d&&o?p(t):(o=r=void 0,a)}function m(){var t=J(),e=v(t);if(o=arguments,r=this,c=t,e){if(void 0===l)return function(t){return u=t,l=setTimeout(g,n),s?p(t):a}(c);if(f)return clearTimeout(l),l=setTimeout(g,n),p(c)}return void 0===l&&(l=setTimeout(g,n)),a}return n=I(n)||0,S(e)&&(s=!!e.leading,i=(f="maxWait"in e)?C(I(e.maxWait)||0,n):i,d="trailing"in e?!!e.trailing:d),m.cancel=function(){void 0!==l&&clearTimeout(l),u=0,o=c=r=l=void 0},m.flush=function(){return void 0===l?a:b(J())},m}const $={readOnly:!1,placeholder:"备注",...window.tl_editor_config||{}},F={modules:{toolbar:!1},placeholder:$.placeholder,theme:"snow",readOnly:$.readOnly},_=new Quill("#editor",F);function W(){const t=_.getSelection();return null==t?{}:_.getFormat(t)}function H(t){const n=W(),e=parseInt(n.indent||0,10);t*="rtl"===n.direction?-1:1,_.format("indent",e+t)}n("toolbar.boldButtonTapped",(()=>{const t=(n="bold",null!=W()[n]);var n;_.format("bold",!t)})),n("toolbar.numberListButtonTapped",(()=>{const t=W();_.format("list","ordered"!==t.list&&"ordered")})),n("toolbar.dashListButtonTapped",(()=>{const t=W();_.format("list","bullet"!==t.list&&"bullet")})),n("toolbar.checkBoxListButtonTapped",(()=>{const t=W();"checked"===t.list||"unchecked"===t.list?_.format("list",!1):_.format("list","unchecked")})),n("toolbar.increaseIndentButtonTapped",(()=>{H(1)})),n("toolbar.decreaseIndentButtonTapped",(()=>{H(-1)})),n("toolbar.blurButtonTapped",(()=>{_.blur()})),a("editor.fetchContent",(()=>_.getContents())),n("editor.setContent",(t=>{_.setContents(JSON.parse(t),"api")}));const z=function(t,n,e){var o=!0,r=!0;if("function"!=typeof t)throw new TypeError("Expected a function");return S(e)&&(o="leading"in e?!!e.leading:o,r="trailing"in e?!!e.trailing:r),M(t,n,{leading:o,maxWait:n,trailing:r})}((function(t,n){e("editor.contentChange",{content:t,lines:n})}),300,{leading:!1});_.on("text-change",((t,n,e)=>{"user"==e&&z(JSON.stringify(_.getContents()),_.getLines().length)}))}();
